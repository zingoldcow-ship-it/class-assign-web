<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë°˜ë°°ì • ë„ìš°ë¯¸ (ë¸Œë¼ìš°ì € ì „ìš©)</title>
  <style>
    :root{ --bg:#0b1020; --card:#121a33; --text:#e9ecf1; --muted:#a9b1c6; --accent:#7aa2ff; --danger:#ff6b6b; --ok:#3ddc97; }
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans KR,Arial,sans-serif;background:var(--bg);color:var(--text);}
    header{padding:16px;border-bottom:1px solid rgba(255,255,255,.08);position:sticky;top:0;background:rgba(11,16,32,.9);backdrop-filter:blur(8px);z-index:50;}
    .wrap{max-width:1300px;margin:0 auto;padding:14px;}
    h1{margin:0;font-size:18px;}
    .sub{margin-top:6px;color:var(--muted);font-size:13px;line-height:1.4}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .pill{font-size:12px;border:1px solid rgba(255,255,255,.14);padding:6px 10px;border-radius:999px;color:var(--muted);}
    .pill.ok{border-color:rgba(61,220,151,.55);color:#c9ffe9}
    .pill.warn{border-color:rgba(255,107,107,.55);color:#ffd7d7}
    .tabs{display:flex;gap:8px;margin-top:12px}
    .tabBtn{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);color:var(--text);padding:8px 12px;border-radius:999px;cursor:pointer;font-weight:800}
    .tabBtn.active{background:var(--accent);color:#071022;border-color:transparent}
    .app{display:grid;grid-template-columns:340px 1fr;gap:14px;align-items:start}
    @media (max-width: 980px){ .app{grid-template-columns:1fr;} }
    .card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px;box-shadow:0 8px 24px rgba(0,0,0,.25);}
    .panelTitle{font-size:14px;margin:0 0 10px 0;}
    .divider{height:1px;background:rgba(255,255,255,.08);margin:12px 0;}
    label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
    /* Setup panel readability */
    #setupTab aside.card label{font-size:14px; line-height:1.25;}
    #setupTab aside.card input[type=file],
    #setupTab aside.card input[type=number],
    #setupTab aside.card select{font-size:15px;}




    input[type=file],input[type=number],select{width:100%;background:#0b1220;color:#e5e7eb;border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:10px 12px;outline:none}
select:focus{border-color:rgba(96,165,250,.8)}
option{background:#0b1220;color:#e5e7eb}
    input[type=file]{padding:10px;border-radius:12px;border:1px dashed rgba(255,255,255,.18);background:rgba(255,255,255,.03);color:var(--text)}
    input[type=number],select{padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.03);color:var(--text)}
    input[type=range]{width:100%;accent-color:var(--accent)}
    .kv{display:flex;justify-content:space-between;gap:10px;font-size:12px;color:var(--muted);margin-top:6px}
    button{background:var(--accent);border:none;color:#071022;padding:11px 12px;border-radius:12px;font-weight:900;cursor:pointer;width:100%}
    .btnSecondary{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.14);color:var(--text)}
    button:disabled{opacity:.4;cursor:not-allowed}
    .small{font-size:12px;color:var(--muted)}
    .danger{color:var(--danger)}
    .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.55);z-index:100;}
    .overlay .box{background:var(--card);border:1px solid rgba(255,255,255,.14);padding:16px;border-radius:14px;max-width:520px;width:calc(100% - 28px);}
    .spinner{width:18px;height:18px;border-radius:50%;border:3px solid rgba(255,255,255,.2);border-top-color:rgba(122,162,255,.9);animation:spin 1s linear infinite;display:inline-block;vertical-align:-4px;margin-right:8px;}
    @keyframes spin{to{transform:rotate(360deg)}}
    table{width:100%;border-collapse:collapse;font-size:12px}
    th,td{border-bottom:1px solid rgba(255,255,255,.08);padding:8px 6px;text-align:left;white-space:nowrap}
    th{color:var(--muted);font-weight:600;position:sticky;top:0;background:rgba(18,26,51,.96)}
    .chartGrid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    @media (max-width: 980px){ .chartGrid{grid-template-columns:1fr;} }
    .chartBox{height:260px;position:relative}
    canvas{width:100% !important;height:100% !important;display:block}
    a{color:#b9c9ff}

    /* Accordion + sticky run bar */
    main.wrap{padding-bottom:96px;} /* space for fixed bottom bar */
    details.acc{border:1px solid rgba(255,255,255,.10);border-radius:12px;background:rgba(255,255,255,.03);padding:10px 10px;margin:10px 0;}
    details.acc[open]{background:rgba(255,255,255,.05);}
    details.acc summary{cursor:pointer;font-weight:900;list-style:none;display:flex;align-items:center;justify-content:space-between;gap:10px;}
    details.acc summary::-webkit-details-marker{display:none;}
    .accHint{font-size:12px;color:var(--muted);margin-top:8px;}
    .stickyBar{position:fixed;left:0;right:0;bottom:0;z-index:80;background:rgba(11,16,32,.92);backdrop-filter:blur(10px);border-top:1px solid rgba(255,255,255,.10);}
    .stickyInner{max-width:1300px;margin:0 auto;padding:10px 14px;display:flex;gap:10px;align-items:center;}
    .stickyInner .summaryInline{flex:1;min-width:180px;}
    .stickyInner button{width:360px;max-width:48vw;}
    @media (max-width: 980px){
      .stickyInner{flex-direction:column;align-items:stretch;}
      .stickyInner button{width:100%;max-width:none;}
    }

  </style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>ğŸ“˜ ë°˜ë°°ì • ë„ìš°ë¯¸ (ë¸Œë¼ìš°ì € ì „ìš©)</h1>
    <div class="sub">
      â‘  <b>ìƒ˜í”Œ ì–‘ì‹</b>ì— í•™ìƒ ì •ë³´ë¥¼ ì…ë ¥ â†’ â‘¡ ì—‘ì…€(.xlsx) ì—…ë¡œë“œ â†’ â‘¢ ì„¤ì •(ë°˜ ê°œìˆ˜/ê°€ì¤‘ì¹˜/ë¶„ë¦¬Â·ë°°ë ¤ ê°•ë„) â†’ â‘£ <b>ë°˜ë°°ì • ì‹¤í–‰</b> â†’ â‘¤ ê²°ê³¼ í™•ì¸/ì—‘ì…€ ë‹¤ìš´ë¡œë“œ<br/>
      ğŸ” <b>ëª¨ë“  ì²˜ë¦¬ëŠ” ë‚´ ë¸Œë¼ìš°ì €ì—ì„œë§Œ</b> ì´ë£¨ì–´ì§€ë©°, ì—…ë¡œë“œí•œ íŒŒì¼ê³¼ ë°ì´í„°ëŠ” <b>ì–´ë–¤ ì„œë²„ë¡œë„ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤</b>.
    </div>
    <div class="row" style="margin-top:10px">
      <span class="pill ok">ì„œë²„ ì „ì†¡ ì—†ìŒ</span>
      <span class="pill" id="filePill">ì—‘ì…€ ë¯¸ì„ íƒ</span>
      <span class="pill" id="rowsPill">0ëª…</span>
      <span class="pill" id="statusPill">ëŒ€ê¸°</span>
    </div>
    <div class="tabs">
      <button class="tabBtn active" id="tabSetup">ì„¤ì •</button>
      <button class="tabBtn" id="tabResult" disabled>ê²°ê³¼</button>
    </div>
  </div>
</header>

<main class="wrap">
  <!-- SETUP TAB -->
  <section id="setupTab">
    <div class="app">
      <aside class="card" style="position:sticky; top:120px;">
        <h2 class="panelTitle">âš™ï¸ ì„¤ì •</h2>
        <label>í•™ìƒ ë°ì´í„° ì—‘ì…€(.xlsx)</label>
        <input id="fileInput" type="file" accept=".xlsx" style="display:none" />
        <button type="button" class="btnSecondary" id="fileBtn">íŒŒì¼ ì—…ë¡œë“œ</button>
        <div class="small" id="fileNameHint" style="margin-top:6px">ì„ íƒëœ íŒŒì¼ ì—†ìŒ</div>
        <div style="margin-top:10px">
          <a href="template.xlsx" download="ë°˜ë°°ì •_ì–‘ì‹_ìƒ˜í”Œ(í† ê¸€ì ìš©).xlsx" style="display:block;text-decoration:none">
            <button type="button" class="btnSecondary">ìƒ˜í”Œ ì–‘ì‹ ë‹¤ìš´ë¡œë“œ</button>
          </a>
        </div>
        <div class="small" style="margin-top:8px">* ì²˜ìŒ ì‚¬ìš©í•˜ì‹œë©´ ìœ„ ì–‘ì‹ì„ ë‚´ë ¤ë°›ì•„ <b>ì—´ ì´ë¦„/í˜•ì‹</b>ì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•´ ì£¼ì„¸ìš”.</div>
        <div class="divider"></div>


        <div class="accHint">â¬‡ ì•„ë˜ <b>í™”ì‚´í‘œ</b>ë¥¼ ëˆŒëŸ¬ ì„¤ì •ì„ í¼ì¹œ ë’¤ ê°’ì„ í™•ì¸/ì…ë ¥í•˜ì„¸ìš”.</div>

        <details class="acc" id="accBasic">
          <summary>
            <span>â‘  ê¸°ë³¸ ì„¤ì •</span>
            <span class="small" style="opacity:.9">(ì—¬ê¸°ê¹Œì§€ë§Œ í•´ë„ ì‹¤í–‰ ê°€ëŠ¥)</span>
          </summary>
          <div style="height:10px"></div>

          <label>1. ë°˜ ê°œìˆ˜</label>
          <input id="classCount" type="number" min="2" max="30" value="10" />
          <div class="divider"></div>

          <label>2. ì‹œë®¬ë ˆì´ì…˜ íšŸìˆ˜</label>
          <div class="small" style="margin-top:-2px; margin-bottom:8px;">(í´ìˆ˜ë¡ ë” ê· í˜• / ëŠë ¤ì§ˆ ìˆ˜ ìˆìŒ)</div>
          <input id="iterations" type="number" min="200" max="60000" step="200" value="8000" />
          <div class="small">* 250ëª…/10ë°˜ ê¸°ì¤€: 8,000~20,000 ì¶”ì²œ</div>
          <div class="divider"></div>

          <label>3. ë°°ì • ê¸°ì¤€ê°’</label>
          <div class="small" style="margin-top:-2px; margin-bottom:8px;">(ê°™ì€ ê°’ì„ ì“°ë©´ ê²°ê³¼ê°€ ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.)</div>
          <input id="seed" type="number" min="0" max="999999" value="42" />
        </details>

        <details class="acc" id="accWeights">
          <summary>
            <span>â‘¡ ê°€ì¤‘ì¹˜ ì„¤ì •</span>
            <span class="small" style="opacity:.9">(í•™ì—…Â·ê´€ê³„Â·ë¯¼ì›Â·ë‹¤ë¬¸í™” ê· í˜• ì¡°ì •)</span>
          </summary>
          <div style="height:10px"></div>

          <label>4-1. í•™ì—…ì„±ì·¨ ê°€ì¤‘ì¹˜</label>
          <input id="wAcad" type="range" min="0" max="600" value="160" step="10" />
          <div class="kv"><span>0</span><span id="wAcadV">160</span><span>600</span></div>

          <div style="margin-top:10px">
            <label>4-2. êµìš°ê´€ê³„ ê°€ì¤‘ì¹˜</label>
            <input id="wPeer" type="range" min="0" max="600" value="160" step="10" />
            <div class="kv"><span>0</span><span id="wPeerV">160</span><span>600</span></div>
          </div>

          <div style="margin-top:10px">
            <label>4-3. í•™ë¶€ëª¨ë¯¼ì› ê°€ì¤‘ì¹˜</label>
            <input id="wParent" type="range" min="0" max="600" value="260" step="10" />
            <div class="kv"><span>0</span><span id="wParentV">260</span><span>600</span></div>
          </div>

          <div style="margin-top:10px">
            <label>4-4. ë‹¤ë¬¸í™”í•™ìƒ ê°€ì¤‘ì¹˜</label>
            <input id="wMulti" type="range" min="0" max="600" value="160" step="10" />
            <div class="kv"><span>0</span><span id="wMultiV">160</span><span>600</span></div>
          </div>
        </details>

        <details class="acc" id="accConstraints">
          <summary>
            <span>â‘¢ ìš”ì²­Â·ì œì•½ ì„¤ì •</span>
            <span class="small" style="opacity:.9">(ë¶„ë¦¬Â·ë°°ë ¤Â·íŠ¹ìˆ˜ ìƒí™© ê³ ë ¤)</span>
          </summary>
          <div style="height:10px"></div>

          <label>5. <strong style='font-size:1.05em'>ADHD ë°˜ë‹¹ ìµœëŒ€ ì¸ì›</strong></label>
          <select id="adhdCap">
            <option value="auto" selected>ìë™(ì œí•œ ì—†ìŒ Â· ê· ë“± ë¶„ì‚° ìš°ì„ )</option>
            <option value="1">1ëª…</option>
            <option value="2">2ëª…</option>
            <option value="3">3ëª…</option>
            <option value="4">4ëª…</option>
            <option value="5">5ëª…</option>
          </select>
          <div class="small" style="margin-top:8px">* ì˜ˆ: ADHD 30ëª… / 10ë°˜ì´ë¼ë©´ í‰ê·  3ëª…ì…ë‹ˆë‹¤.<br>í˜„ì‹¤ì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•œ ì œí•œ(ì˜ˆ: ìµœëŒ€ 1ëª…)ì„ ì„ íƒí•˜ë©´, ì•Œê³ ë¦¬ì¦˜ì€ <b>ê°€ëŠ¥í•œ í•œ</b> ì œí•œì„ ì§€í‚¤ë„ë¡ ì‹œë„í•©ë‹ˆë‹¤.</div>

          <div class="divider"></div>

          <label>6. <strong style='font-size:1.05em'>ë‹¤ë¬¸í™”í•™ìƒ ë°°ì •</strong></label>
          <select id="multiMode">
            <option value="off" selected>ë¯¸ì ìš©</option>
            <option value="medium">ë³´í†µ (ê°€ê¸‰ì  ë°˜ë³„ ê· ë“± ë¶„ì‚°)</option>
            <option value="strong">ê°• (ê°€ëŠ¥í•œ í•œ ê· ë“± ë¶„ì‚°)</option>
          </select>
          <div class="small" style="margin-top:8px">* ì—‘ì…€ì— <b>ë‹¤ë¬¸í™”ì—¬ë¶€</b> ì—´ì´ ìˆìœ¼ë©´ Y/Në¡œ ì¸ì‹í•©ë‹ˆë‹¤. (ì—†ìœ¼ë©´ ëª¨ë‘ Nìœ¼ë¡œ ì²˜ë¦¬)</div>

          <div class="divider"></div>

          <label>7. <strong style='font-size:1.05em'>ë¶„ë¦¬ìš”ì²­ ê°•ë„</strong></label>
          <select id="sepStrength">
            <option value="strict">ì—„ê²© (ì›ì¹™ì ìœ¼ë¡œ ê°™ì€ ë°˜ ë°°ì • ê¸ˆì§€)</option>
            <option value="strong" selected>ê°• (ìµœëŒ€í•œ ë‹¤ë¥¸ ë°˜ìœ¼ë¡œ ë¶„ì‚°)</option>
            <option value="medium">ë³´í†µ (ê°€ê¸‰ì  ë‹¤ë¥¸ ë°˜ìœ¼ë¡œ ë¶„ì‚°)</option>
            <option value="weak">ì•½í•¨ (ê°€ëŠ¥í•˜ë©´ ë¶„ì‚°, ì—¬ê±´ì— ë”°ë¼ í—ˆìš©)</option>
          </select>

          <div style="margin-top:10px">
            <label>8. <strong style='font-size:1.05em'>ë°°ë ¤ìš”ì²­ ê°•ë„</strong></label>
            <select id="careStrength">
              <option value="strict">ì—„ê²© (ê°€ëŠ¥í•œ í•œ ê°™ì€ ë°˜ìœ¼ë¡œ ë°°ì •)</option>
              <option value="strong" selected>ê°• (ìµœëŒ€í•œ ê°™ì€ ë°˜ìœ¼ë¡œ ë°°ì •)</option>
              <option value="medium">ë³´í†µ (ê°€ê¸‰ì  ê°™ì€ ë°˜ìœ¼ë¡œ ë°°ì •)</option>
              <option value="weak">ì•½í•¨ (ê°€ëŠ¥í•˜ë©´ ê°™ì€ ë°˜, ì—¬ê±´ì— ë”°ë¼ í—ˆìš©)</option>
            </select>
          </div>
        </details>

        <div class="small" style="margin-top:10px">* ì‹¤í–‰ ë²„íŠ¼ì€ í™”ë©´ ë§¨ ì•„ë˜ì— ê³ ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</div>
      </aside>

      <section style="display:flex; flex-direction:column; gap:14px;">
        <section class="card">
          <h2 class="panelTitle">ğŸ“Š ê¸°ë³¸ í†µê³„</h2>
          <div id="stats" class="small">ì—‘ì…€ì„ ì„ íƒí•˜ë©´ í†µê³„/ë¯¸ë¦¬ë³´ê¸°ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>
        </section>

        <section class="card" id="settingSummaryCard">
          <h2 class="panelTitle">ğŸ§¾ í˜„ì¬ ì ìš© ì¡°ê±´</h2>
          <div id="settingSummaryBox" class="small">ê¸°ë³¸ê°’ ê¸°ì¤€ìœ¼ë¡œ ì‹¤í–‰ ì¤€ë¹„ê°€ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</div>
        </section>
        <section class="card">
          <h2 class="panelTitle">ğŸ” ë¯¸ë¦¬ë³´ê¸°(ìƒìœ„ 20ëª…)</h2>
          <div id="legendPreview" class="small" style="opacity:0.9; margin-top:-4px; margin-bottom:6px;">ì•„ì´ì½˜ ì•ˆë‚´: ğŸŒ ë‹¤ë¬¸í™” â”‚ ğŸ§  ADHD â”‚ ğŸ”— ë¶„ë¦¬ìš”ì²­ â”‚ ğŸ¤ ë°°ë ¤ìš”ì²­</div>
          <div id="errors" class="small danger"></div>
          <div style="overflow:auto; max-height: 420px;">
            <table id="previewTable"></table>
          </div>
        </section>

        <section class="card" id="nextStepsCard" style="display:none;">
          <h2 class="panelTitle">ğŸ‘‰ ë‹¤ìŒ ë‹¨ê³„</h2>
          <div class="small" id="nextStepsTxt">
            â‘  ë°˜ ê°œìˆ˜ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.<br/>
            â‘¡ ê°€ì¤‘ì¹˜ë¥¼ ê¸°ë³¸ê°’ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê±°ë‚˜ í•„ìš” ì‹œ ì¡°ì •í•©ë‹ˆë‹¤.<br/>
            â‘¢ <b>ë°˜ë°°ì • ì‹¤í–‰</b> ë²„íŠ¼ì„ ëˆŒëŸ¬ ê²°ê³¼ íƒ­ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤.
          </div>
        </section>

        <section class="card">
          <h2 class="panelTitle">ğŸ§­ ì•ˆë‚´</h2>
          <div class="small">
            â€¢ ê²°ê³¼ëŠ” <b>ì´ ì›¹ì•± ë‚´ë¶€ì˜ â€œê²°ê³¼â€ íƒ­</b>ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤.<br/>
            â€¢ ì—‘ì…€ ì—´ ì´ë¦„(ê¶Œì¥): í•™ìƒëª…, ì„±ë³„, í•™ì—…ì„±ì·¨, êµìš°ê´€ê³„, í•™ë¶€ëª¨ë¯¼ì›, íŠ¹ìˆ˜ì—¬ë¶€, ADHDì—¬ë¶€, ë¶„ë¦¬ìš”ì²­í•™ìƒ, ë°°ë ¤ìš”ì²­í•™ìƒ, ë¹„ê³ <br/>
            â€¢ <b>ë¶„ë¦¬í•™ìƒ</b>: 'ë¶„ë¦¬ìš”ì²­í•™ìƒ'ì— ê°™ì€ ê°’ì„ ë„£ì€ í•™ìƒë¼ë¦¬ëŠ” ê°€ëŠ¥í•œ í•œ <b>ë‹¤ë¥¸ ë°˜</b>ìœ¼ë¡œ ë°°ì •(ì˜ˆ: A1, A1)<br/>
            â€¢ <b>ë°°ë ¤í•™ìƒ</b>: 'ë°°ë ¤ìš”ì²­í•™ìƒ'ì— ê°™ì€ ê°’ì„ ë„£ì€ í•™ìƒë¼ë¦¬ëŠ” ê°€ëŠ¥í•œ í•œ <b>ê°™ì€ ë°˜</b>ìœ¼ë¡œ ë°°ì •(ì˜ˆ: B3, B3)
          </div>
        </section>
      </section>
    </div>
  </section>

  <!-- RESULT TAB -->
  <section id="resultTab" style="display:none;">
    <div style="display:flex;flex-direction:column;gap:14px;">
      <section class="card">
        <h2 class="panelTitle">âœ… ë°˜ë°°ì • ê²°ê³¼</h2>
        <div class="row" style="justify-content:space-between;">
          <div class="row">
            <span class="pill ok" id="metaPill">-</span>
            <span class="pill" id="scorePill">Score: -</span>
            <span class="pill warn" id="sepPill">ë¶„ë¦¬ ìœ„ë°˜: -</span>
            <span class="pill" id="carePill">ë°°ë ¤ ë¯¸ì¶©ì¡±: -</span>
          </div>
          <div class="row">
            <button id="downloadBtn" style="width:auto;">ê²°ê³¼ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ</button>
          </div>
        </div>
      </section>

      <section class="chartGrid">
        <section class="card">
          <h2 class="panelTitle">ğŸ“Š ë°˜ë³„ ìš”ì•½</h2>
          <div id="classCards" class="small"></div><div style="height:10px"></div><div id="classSummary" class="small">-</div>
        </section>
        <section class="card">
          <h2 class="panelTitle">âš ï¸ ê²°ê³¼ ë¦¬í¬íŠ¸</h2>
          <div class="small">
            â€¢ <b>ë¶„ë¦¬ ìœ„ë°˜</b>: ë¶„ë¦¬í•™ìƒ(ê°™ì€ ë¶„ë¦¬ê·¸ë£¹)ì´ ê°™ì€ ë°˜ì— 2ëª… ì´ìƒ ë°°ì •ëœ ê²½ìš°<br/>
            â€¢ <b>ë°°ë ¤ ë¯¸ì¶©ì¡±</b>: ë°°ë ¤í•™ìƒ(ê°™ì€ ë°°ë ¤ê·¸ë£¹)ì´ ì—¬ëŸ¬ ë°˜ìœ¼ë¡œ ë‚˜ë‰œ ì •ë„<br/>
            â€¢ <b>í•™ë¶€ëª¨ë¯¼ì›/í•™ì—…ì„±ì·¨/êµìš°ê´€ê³„</b>: ë°˜ë³„ë¡œ â€˜ì¢‹ìŒ/ë³´í†µ/ë‚˜ì¨â€™ ë¶„í¬ì™€ í‰ê· ì ìˆ˜ í¸ì°¨ë¥¼ ìš”ì•½í•©ë‹ˆë‹¤. (ì•„ë˜ì—ì„œ <b>íƒ­</b>ìœ¼ë¡œ ì „í™˜í•´ í™•ì¸)
          </div>
          <div style="height:10px"></div>
          <div id="violations" class="small">-</div>
        </section>
      </section>

      <section class="card" id="unsatisfiedCard">
        <h2 class="panelTitle">ğŸ” ë¯¸ì¶©ì¡± í•™ìƒ ëª©ë¡</h2>
        <div class="small" style="margin-bottom:10px">
          â€¢ <b>ë¶„ë¦¬ ë¯¸ì¶©ì¡±</b>ì€ â€˜ê°™ì€ ë¶„ë¦¬ìš”ì²­í•™ìƒ(ì½”ë“œ/ìƒëŒ€í•™ìƒ)â€™ì´ ê°™ì€ ë°˜ì— í•¨ê»˜ ë°°ì •ëœ í•™ìƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.<br/>
          â€¢ <b>ë°°ë ¤ ë¯¸ì¶©ì¡±</b>ì€ â€˜ê°™ì€ ë°°ë ¤ìš”ì²­í•™ìƒ(ì½”ë“œ/ìƒëŒ€í•™ìƒ)â€™ ì¹œêµ¬ê°€ <b>ìê¸° ë°˜ì— 1ëª…ë„ ì—†ëŠ”</b> í•™ìƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
        </div>
        <details open>
          <summary style="cursor:pointer; font-weight:900;">ë¶„ë¦¬ ë¯¸ì¶©ì¡± ëª©ë¡ <span class="small" id="unsatSepMeta"></span></summary>
          <div style="height:8px"></div>
          <div style="overflow:auto; max-height: 280px;">
            <table id="unsatSepTable"></table>
          </div>
        </details>
        <div style="height:12px"></div>
        <details>
          <summary style="cursor:pointer; font-weight:900;">ë°°ë ¤ ë¯¸ì¶©ì¡± ëª©ë¡ <span class="small" id="unsatCareMeta"></span></summary>
          <div style="height:8px"></div>
          <div style="overflow:auto; max-height: 280px;">
            <table id="unsatCareTable"></table>
          </div>
        </details>
      </section>

      <section class="card">
        <h2 class="panelTitle">ğŸ“ˆ ê·¸ë˜í”„(ë°˜ë³„ ë¶„í¬)</h2>
        <div class="small">* ì•ˆì •ì„±ì„ ìœ„í•´ ì°¨íŠ¸ëŠ” ë°˜ì‘í˜•(responsive) OFF ìƒíƒœë¡œ ë Œë”ë§í•©ë‹ˆë‹¤.</div>
        <div style="height:12px"></div>
        <div class="chartGrid">
          <div class="card" style="padding:12px;">
            <div class="small">ë°˜ë³„ ì¸ì›</div>
            <div class="chartBox"><canvas id="cntChart" height="260"></canvas></div>
          </div>
          <div class="card" style="padding:12px;">
            <div class="small">ë°˜ë³„ ë‚¨/ì—¬</div>
            <div class="chartBox"><canvas id="genderChart" height="260"></canvas></div>
          </div>
        </div>
      </section>

      <section class="card">
        <h2 class="panelTitle">ğŸ“‹ ë°°ì •í‘œ</h2>
        <div id="legendResult" class="small" style="opacity:0.9; margin-top:-4px; margin-bottom:6px;">ì•„ì´ì½˜ ì•ˆë‚´: ğŸŒ ë‹¤ë¬¸í™” â”‚ ğŸ§  ADHD â”‚ ğŸ”— ë¶„ë¦¬ìš”ì²­ â”‚ ğŸ¤ ë°°ë ¤ìš”ì²­</div>
        <div class="row" style="margin-bottom:10px;">
          <label class="small">ë°˜ í•„í„°</label>
          <select id="classFilter"></select>
          <span class="small" id="tableMeta"></span>
        </div>
        
        <div style="overflow:auto; max-height: 560px;">
          <table id="resultTable"></table>
        </div>
      </section>
    </div>
  </section>
</main>



<div class="stickyBar" id="stickyBar">
  <div class="stickyInner">
    <div class="summaryInline">
      <div class="small" id="settingSummaryInline">ì„¤ì •ì„ í™•ì¸í•œ ë’¤ ì‹¤í–‰í•˜ì„¸ìš”.</div>
    </div>
    <button id="runBtn" type="button" disabled>ë°˜ë°°ì • ì‹¤í–‰ â†’ ê²°ê³¼ íƒ­ ë³´ê¸°</button>
  </div>
</div>

<div class="overlay" id="overlay">
  <div class="box">
    <div class="row" style="gap:10px;">
      <span class="spinner"></span>
      <div>
        <div style="font-weight:900;">ë°˜ë°°ì •ì„ ê³„ì‚° ì¤‘â€¦</div>
        <div class="small" id="progressTxt">ì‹œë®¬ë ˆì´ì…˜ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.</div>
      </div>
    </div>
  </div>
</div>


<script>
(function(){
  function setStatus(txt){ var el=document.getElementById('statusPill'); if(el) el.textContent=txt; }
  function showErr(msg){
    var e=document.getElementById('errors');
    if(e){ e.textContent=msg; }
    setStatus('ì˜¤ë¥˜');
  }
  window.addEventListener('error', function(ev){
    showErr('ìŠ¤í¬ë¦½íŠ¸ ì˜¤ë¥˜: ' + (ev && ev.message ? ev.message : ev));
  });
  window.addEventListener('unhandledrejection', function(ev){
    showErr('ë¹„ë™ê¸° ì˜¤ë¥˜: ' + (ev && ev.reason ? (ev.reason.message || ev.reason) : ev));
  });
  window.addEventListener('DOMContentLoaded', function(){
    try{
      var inp=document.getElementById('fileInput');
      var fp=document.getElementById('filePill');
      if(inp){
        inp.addEventListener('change', function(){
          if(fp) fp.textContent = inp.files && inp.files[0] ? inp.files[0].name : 'ì—‘ì…€ ë¯¸ì„ íƒ';
          setStatus('íŒŒì¼ ì„ íƒë¨');
        });
      }
      // CDN ë¡œë“œ ì²´í¬(5ì´ˆ í›„)
      setTimeout(function(){
        if(!window.XLSX){
          showErr('ì—‘ì…€ ì²˜ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬(XLSX)ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\ní•™êµ/ê¸°ê´€ ë„¤íŠ¸ì›Œí¬ì—ì„œ CDNì´ ì°¨ë‹¨ëœ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.\ní•´ê²°: ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬(ëª¨ë°”ì¼ í•«ìŠ¤íŒŸ ë“±)ì—ì„œ ì ‘ì†í•˜ê±°ë‚˜, "ì˜¤í”„ë¼ì¸(ë¼ì´ë¸ŒëŸ¬ë¦¬ í¬í•¨)" ë²„ì „ìœ¼ë¡œ êµì²´í•˜ì„¸ìš”.');
        }
        if(!window.Chart){
          // ê·¸ë˜í”„ë§Œ ì‹¤íŒ¨í•  ìˆ˜ë„ ìˆìŒ
          var e=document.getElementById('errors');
          if(e && !e.textContent){
            e.textContent = 'ê·¸ë˜í”„ ë¼ì´ë¸ŒëŸ¬ë¦¬(Chart.js)ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\nê·¸ë˜í”„ ì—†ì´ë„ ë°˜ë°°ì •ì€ ê°€ëŠ¥í•˜ì§€ë§Œ, í•™êµë§ì—ì„œ CDN ì°¨ë‹¨ ì‹œ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
          }
        }
      }, 5000);
    }catch(_){}
  });
})();
</script>

<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="./app.js?v=343"></script>
</body>
</html>
